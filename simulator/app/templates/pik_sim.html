<html> 
  <head> 
    
  </head> 

   <body> 
      <h1>Pikmin Simulation</h1>
      <form method="POST">
         <div style="background-color:#989b9e;padding:6px;">
            <h3>Initialize Graph</h3>
            <label for="input_graph_family">Choose a graph type:</label>
            <select name="input_graph_family" id="input_graph_family">
               <option value="path">Path</option>
               <option value="cycle">Cycle</option>
               <option value="star">Star</option>
               <option value="wheel">Wheel</option>
               <option value="complete">Complete</option>
            </select>
            <br>
            <label style="color:#141414;" for="input_size">Select Number of Vertices:</label>
            <input id="number" type="number" name="input_size" value="1" min="1" max="30" />
            <br>
            <input type="submit" name="init_graph" value="Load Graph">
         </div>
         {% if graph_size > 0 %}
         <div style="background-color:#797a7d;padding:6px;">
            <div style="padding:6px;">
               <h4>Run Automatic Analysis (WIP)</h4>
               <input type="submit" name="run_automatic" value="Run Automatic Analysis">
            </div>
         
            <div style="padding:6px;">
               <h4>Run Manual Analysis</h4>
               <label style="color:#141414;" for="input_pik_pos">Select Starting Vertex:</label>
               <input id="number" type="number" name="input_pik_pos" value="0" min="0" max={{graph_size}} />
               <input type="submit" name="init_pik" value="Initialize Pikmin">
            </div>
         </div>
         {% endif %}
         <br>
         <div>
            {% if not game_complete %}
               <h2>Current Game State: </h2>
               <div style="text-indent:50px;">
                  <h4>Turn: {{ turn_number }}</h4>
                  <h4># of Verticies Colored Red: {{ red_count }}</h4>
                  <h4>Current Support Score: {{ red_count + turn_number}}</h4>
                  <h4>Vertices Colored: {{ colored_count }} / {{ graph_size }}</h4>
               </div>
            {% endif %}
            {% if game_complete %}
               <h2>Final Game State: </h2>
               <div style="text-indent:50px;">
                  <h4>Turn: {{ turn_number }}</h4>
                  <h4># of Verticies Colored Red: {{ red_count }}</h4>
                  <h4>Final Support Score: {{ red_count + turn_number}}</h4>
                  <h4>Vertices Colored: {{ colored_count }} / {{ graph_size }}</h4>
               </div>
            {% endif %}
         </div>
         <div>
            {% if pikmin_agents_control != [] and not game_complete %}
            <h3>Provide Instructions</h3>
            {% for agent_controller in pikmin_agents_control %}
               {{ agent_controller[0] }}: Move to 
                  <select name={{agent_controller[1]}} value=1>
                  {% for vertex in graph_vertices%}
                     <option value={{vertex+1}} SELECTED>{{vertex+1}}</option>
                  {% endfor %}
                  </select>, then color
                  <select name={{agent_controller[2]}}>
                     <option value="red">Red</option>
                     <option value="blue">Blue</option>
                     <option value="null">Nothing</option>
                  </select> 
                  <input type="hidden" value={{agent}} id="executor_pikmin">
                  <br>
            {% endfor %}
         </div>
         <input type="hidden" value={{turn_number}} id="turn_tracker">
         <input type="submit" name="execute_turn" value="Execute Turn">
         {% endif %}
         {% if turn_validity_error != "" %}
            <h4 style="color:red;"> {{ turn_validity_error }} </h4>
         {% endif %}
      </form>
      {% include 'pik_graph.html' %}
      {% if instructions_history != [] %}
      <div>
         <h2>Turn History: </h2>
            <ul>
               {% for turn in instructions_history %}
                  <li><b>Turn {{ turn[0] }}:</b> {% for pikmin_step in turn[1] %}&#40; {{ pikmin_step[0] }}, move to {{ pikmin_step[1] }}, then color {{ pikmin_step[2] }} &#41;</li>{% endfor %}
               {% endfor %}
            </ul>
      </div>
      {% endif %}
  </body> 
</html>